model Pokemon {
  id             Int              @id
  name           String

  abilities      PokemonAbility[]
  natures        PokemonNature[]
  stats          PokemonStat[]
  types          PokemonType[]
  eggGroups      PokemonEggGroup[]
  encounters     Encounter[]
  dexNumbers     PokemonDexNumber[]
  moves          PokemonMove[]
}

model Ability {
  id          Int             @id
  name        String
  description String

  pokemon     PokemonAbility[]
}

model Nature {
  id                Int       @id
  name              String
  increased_stat_id Int
  decreased_stat_id Int

  increasedStat     Stat      @relation("NatureIncreased", fields: [increased_stat_id], references: [id])
  decreasedStat     Stat      @relation("NatureDecreased", fields: [decreased_stat_id], references: [id])

  pokemon           PokemonNature[]
}

model Stat {
  id    Int    @id
  name  String

  naturesIncreased Nature[] @relation("NatureIncreased")
  naturesDecreased Nature[] @relation("NatureDecreased")
  pokemonStats     PokemonStat[]
}

model Type {
  id            Int                @id
  name          String
  generation_id Int
  generation    Generation         @relation(fields: [generation_id], references: [id])
  pokemon       PokemonType[]
  attacking     TypeEffectiveness[] @relation("AttackType")
  defending     TypeEffectiveness[] @relation("DefendType")
}

model TypeEffectiveness {
  id             Int   @id
  type_id        Int
  target_type_id Int
  damage_factor  Int

  attacker Type @relation("AttackType", fields: [type_id], references: [id])
  defender Type @relation("DefendType", fields: [target_type_id], references: [id])
}

model Region {
  id        Int                 @id
  name      String
  locations Location[]
  versionGroups VersionGroupRegion[]
  generations Generation[]
}

model Generation {
  id        Int        @id
  name      String
  region_id Int
  region    Region     @relation(fields: [region_id], references: [id])
  types     Type[]
  versionGroups VersionGroup[]
}

model VersionGroup {
  id            Int       @id
  name          String
  generation_id Int
  generation    Generation @relation(fields: [generation_id], references: [id])

  versions  Version[]
  regions   VersionGroupRegion[]
  slots     EncounterSlot[]
  moves     PokemonMove[]
}

model Version {
  id               Int    @id
  name             String
  version_group_id Int
  versionGroup     VersionGroup @relation(fields: [version_group_id], references: [id])

  encounters  Encounter[]
  encounterRates LocationAreaEncounterRate[]
}

model Location {
  id        Int       @id
  name      String
  region_id Int
  region    Region    @relation(fields: [region_id], references: [id])
  areas     LocationArea[]
}

model LocationArea {
  id        Int    @id
  name      String
  location_id Int
  location  Location @relation(fields: [location_id], references: [id])

  encounters   Encounter[]
  encounterRates LocationAreaEncounterRate[]
}

model EncounterSlot {
  id                Int   @id
  version_group_id  Int
  encounter_method_id Int
  slot              Int
  rarity            Int

  versionGroup VersionGroup @relation(fields: [version_group_id], references: [id])
  method       EncounterMethod @relation(fields: [encounter_method_id], references: [id])
  encounters   Encounter[]
}

model EncounterMethod {
  id     Int   @id
  name   String
  slots  EncounterSlot[]
}

model Encounter {
  id               Int   @id
  version_id       Int
  pokemon_id       Int
  location_area_id Int
  encounter_slot_id Int
  min_level        Int
  max_level        Int

  version       Version       @relation(fields: [version_id], references: [id])
  pokemon       Pokemon       @relation(fields: [pokemon_id], references: [id])
  locationArea  LocationArea  @relation(fields: [location_area_id], references: [id])
  slot          EncounterSlot @relation(fields: [encounter_slot_id], references: [id])
  conditions    EncounterConditionValueMap[]
}

model EncounterCondition {
  id     Int   @id
  name   String
  values EncounterConditionValue[]
}

model EncounterConditionValue {
  id                     Int   @id
  encounter_condition_id Int
  name                   String
  is_default             Boolean

  condition EncounterCondition @relation(fields: [encounter_condition_id], references: [id])
  maps      EncounterConditionValueMap[]
}

model EncounterConditionValueMap {
  id                        Int   @id
  encounter_id              Int
  encounter_condition_value_id Int

  encounter Encounter @relation(fields: [encounter_id], references: [id])
  value     EncounterConditionValue @relation(fields: [encounter_condition_value_id], references: [id])
}

model PokemonAbility {
  id         Int     @id
  pokemon_id Int
  ability_id Int
  is_hidden  Boolean

  pokemon Pokemon @relation(fields: [pokemon_id], references: [id])
  ability Ability @relation(fields: [ability_id], references: [id])
}

model PokemonNature {
  id         Int   @id
  pokemon_id Int
  nature_id  Int

  pokemon Pokemon @relation(fields: [pokemon_id], references: [id])
  nature  Nature  @relation(fields: [nature_id], references: [id])
}

model PokemonStat {
  id         Int  @id
  pokemon_id Int
  stat_id    Int
  base_stat  Int

  pokemon Pokemon @relation(fields: [pokemon_id], references: [id])
  stat    Stat    @relation(fields: [stat_id], references: [id])
}

model PokemonType {
  id         Int   @id
  pokemon_id Int
  type_id    Int

  pokemon Pokemon @relation(fields: [pokemon_id], references: [id])
  type    Type    @relation(fields: [type_id], references: [id])
}

model PokemonEggGroup {
  id         Int   @id
  pokemon_id Int
  egg_group_id Int

  pokemon Pokemon @relation(fields: [pokemon_id], references: [id])
  eggGroup EggGroup @relation(fields: [egg_group_id], references: [id])
}

model Move {
  id              Int   @id
  name            String
  generation_id   Int
  type_id         Int
  pp              Int
  accuracy        Int?
  priority        Int
  damage_class_id Int
  effect_id       Int

  type          Type           @relation(fields: [type_id], references: [id])
  damageClass   MoveDamageClass @relation(fields: [damage_class_id], references: [id])
  effect        MoveEffect     @relation(fields: [effect_id], references: [id])
  pokemonMoves  PokemonMove[]
}

model MoveEffect {
  id          Int    @id
  description String
  moves       Move[]
}

model MoveDamageClass {
  id    Int    @id
  name  String
  moves Move[]
}

model PokemonMove {
  id                    Int @id
  version_group_id      Int
  pokemon_move_method_id Int
  move_id               Int
  level                 Int

  versionGroup VersionGroup @relation(fields: [version_group_id], references: [id])
  method       MoveMethod @relation(fields: [pokemon_move_method_id], references: [id])
  move         Move        @relation(fields: [move_id], references: [id])
}

model MoveMethod {
  id    Int   @id
  name  String
  moves PokemonMove[]
}
